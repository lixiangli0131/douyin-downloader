# DouYin Downloader

<a href="https://trendshift.io/repositories/13156" target="_blank"><img src="https://trendshift.io/api/badge/repositories/13156" alt="jiji262%2Fdouyin-downloader | Trendshift" style="width: 250px; height: 55px;" width="250" height="55"/></a>

DouYin Downloader æ˜¯ä¸€ä¸ªç”¨äºæ‰¹é‡ä¸‹è½½æŠ–éŸ³å†…å®¹çš„å·¥å…·ã€‚åŸºäºæŠ–éŸ³ API å®ç°ï¼Œæ”¯æŒå‘½ä»¤è¡Œå‚æ•°æˆ– YAML é…ç½®æ–‡ä»¶æ–¹å¼è¿è¡Œï¼Œå¯æ»¡è¶³å¤§éƒ¨åˆ†æŠ–éŸ³å†…å®¹çš„ä¸‹è½½éœ€æ±‚ã€‚

## âœ¨ é¡¹ç›®ç‰¹ç‚¹

- **å¤šç§å†…å®¹æ”¯æŒ**
  - è§†é¢‘ã€å›¾é›†ã€éŸ³ä¹ã€ç›´æ’­ä¿¡æ¯ä¸‹è½½
  - æ”¯æŒä¸ªäººä¸»é¡µã€ä½œå“åˆ†äº«ã€ç›´æ’­ã€åˆé›†ã€éŸ³ä¹é›†åˆç­‰å¤šç§é“¾æ¥
  - æ”¯æŒå»æ°´å°ä¸‹è½½
  
- **æ‰¹é‡ä¸‹è½½èƒ½åŠ›**
  - å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½
  - æ”¯æŒå¤šé“¾æ¥æ‰¹é‡ä¸‹è½½
  - è‡ªåŠ¨è·³è¿‡å·²ä¸‹è½½å†…å®¹
  
- **çµæ´»é…ç½®**
  - æ”¯æŒå‘½ä»¤è¡Œå‚æ•°å’Œé…ç½®æ–‡ä»¶ä¸¤ç§æ–¹å¼
  - å¯è‡ªå®šä¹‰ä¸‹è½½è·¯å¾„ã€çº¿ç¨‹æ•°ç­‰
  - æ”¯æŒä¸‹è½½æ•°é‡é™åˆ¶
  
- **å¢é‡æ›´æ–°**
  - æ”¯æŒä¸»é¡µä½œå“å¢é‡æ›´æ–°
  - æ”¯æŒæ•°æ®æŒä¹…åŒ–åˆ°æ•°æ®åº“
  - å¯æ ¹æ®æ—¶é—´èŒƒå›´è¿‡æ»¤

<!-- åˆ˜æ¶µæ½‡é¡¹ç›®ä»‹ç» -->
# Project Background
1. Market Level
The Booming Development of the Short Video Industry
In recent years, the short video industry has witnessed explosive growth. As a globally renowned short video platform, TikTok (known as Douyin in China) has attracted hundreds of millions of users worldwide with its rich and diverse content and powerful social interaction features. A large number of users browse, create, and share videos on TikTok every day, making it a vast treasure trove of content.
The Increasing Demand for Content Dissemination
With the popularization of short videos, the dissemination and sharing of content have become increasingly important. Whether it is individual users who want to save their favorite videos or enterprises and media institutions that need to obtain high-quality content from TikTok for secondary creation and dissemination, there is a strong demand for convenient download tools.

2. User Level
For individual users, there are many interesting and valuable video contents on TikTok, such as funny skits, food preparation tutorials, and travel landscapes. They hope to save these liked contents to their local devices for easy viewing at any time and sharing with friends. However, the TikTok platform itself does not support batch downloading and watermark removal functions, which brings many inconveniences to users when saving content. 

3. Technical Level 
Advancements in Video Processing Technology
In recent years, remarkable progress has been made in video processing technology. Algorithms for video decoding, encoding, and watermark removal have been continuously optimized and improved. These technological advancements make it possible to develop a tool that can download and remove watermarks from videos efficiently and with high quality.
The Popularization of Mobile Devices
The popularization of smartphones and tablet computers has provided a broad market space for the development and application of TikTok download tools. Users can use the download tool anytime and anywhere on their mobile devices to conveniently and quickly obtain and save TikTok content.

# Introduction to the Main Features of the Project
1. Watermark Removal Features
Video Watermark Removal
It adopts advanced image recognition and processing algorithms to intelligently identify the location and characteristics of watermarks in TikTok videos and accurately remove them. After watermark removal, the video picture is clear and natural, without black edges, blurriness, or other flaws, ensuring the visual enjoyment of the video.

2. Picture Watermark Removal in Albums
For the watermarks on pictures in TikTok albums, the tool can quickly locate and remove them. While removing the watermarks, it protects the key information and details of the photos to ensure the integrity and aesthetics of the pictures.

3. Personalized Features
Custom Settings
It allows users to customize download parameters according to their own needs. For example, users can set the default download path, choose whether to automatically overwrite files with the same name, and adjust the number of download threads. Users can also set batch naming rules, such as naming by video title, release time, or serial number, making file naming more standardized and orderly.
Favorites Function
Users can add videos, albums, and other content of interest to the favorites folder for quick subsequent downloading or viewing. The favorites folder supports classified management. Users can create different favorite folders to classify and store different types of materials.

4. Search and Recommendation Features
Search Function
It provides a powerful search function. Users can search for videos, music, and other content on TikTok through keywords. The search results will display relevant information such as the video title, author, and release time, facilitating users to quickly find the required content.
Recommendation Function
Based on users' download history, browsing records, and collection preferences, it recommends relevant TikTok content to users. The recommended content is updated in real-time, providing users with a personalized content discovery experience and helping them find more videos and music that match their interests.

# Project Advantages
1. User Experience Level
Free of charge and ad-free: Users can enjoy the service without spending a penny and being disturbed by annoying ads.

Simple and convenient operation: The user interface is designed to be intuitive, enabling users to complete download tasks quickly and easily.
 
Comprehensive functions: It offers a wide range of features, including video download, picture watermark removal in albums, personalized settings, search, and recommendation, meeting various user needs.
 
Advanced watermark removal technology: Utilizing state-of-the-art image recognition and processing algorithms, it can accurately identify and remove watermarks from videos and pictures while maintaining high-quality output.
 
High-efficiency download capability: With optimized download algorithms and support for multi-threaded downloading, it can significantly improve download speed and stability.

2. Market Competitiveness Level
Differentiated functions: Compared with other similar tools on the market, it stands out with its unique combination of features and superior performance, providing users with a more comprehensive and high-quality service experience.
 
Good user reputation: Positive feedback and high praise from a large number of users have been received, which helps to attract more new users through word-of-mouth promotion.
 
Continuous updating and optimization: The development team is committed to continuously improving and upgrading the product based on user feedback and market changes, ensuring that it remains at the forefront of the industry.

3. Commercial Potential Level
Diverse potential profit models: In addition to the free basic functions, it can explore various commercial opportunities, such as offering premium membership services with additional features, advertising cooperation, and content monetization, to achieve sustainable business development.
 
Wide application scenario expansion: It can be applied in various fields, such as personal entertainment, education and training, marketing and promotion, etc., expanding its user base and market space.
 
4. Cross-Platform Compatibility
Some download tools can cover multiple operating systems, such as Windows and Mac, and some also support mobile devices, meeting the device requirements of different users and providing a seamless user experience across different platforms.

5. Safe and Reliable
After strict virus detection and security verification, it ensures that users will not be threatened by security risks during use. Moreover, most of them are green and free, not occupying too many system resources, ensuring the smooth operation of the user's device.

6. Convenient for Collection and Analysis
It is convenient for TikTok fans to collect their favorite videos for offline viewing. It also provides convenience for video editors who need to obtain materials from TikTok and data analysts who study TikTok trends. It helps them quickly collect the required materials and data.

## ğŸš€ Getting Started <!-- by æé•­é›¨ -->

### Installation

1. Install Python Dependencies
Navigate to the project root directory in the command line (the directory containing the requirements.txt file) and run the following command to install the required Python dependencies:
```bash
pip install -r requirements.txt
```
If you encounter network issues during the installation process that result in slow or failed downloads, you can try using domestic mirror sources, such as Tsinghua University's mirror source:
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```
If a Permission denied error occurs (common in Linux and macOS systems), you can add sudo before the command to elevate permissions, but please note that this may require you to enter your system password:
```bash
sudo pip install -r requirements.txt
```

2. Copy Config Fileï¼š
```bash
cp config.example.yml config.yml
```
If the command prompt does not find the cp command (which may occur in Windows systems), you can manually copy the config.example.yml file and rename it to config.yml, placing it in the project's root directory.

### Configuration

Edit config.yml to setï¼š
- Download URLs
- Save path
- Cookie (from browser DevTools)
Cookie Retrieval Steps:
1.Press F12 â†’ DevTools
2.Go to Application/Storage tab
3.Select "Cookies"
4.Copy target site's cookie names/values

### Execution

**Method 1: Config File (Recommended)**
Enter the project root directory in the command line and execute the following command to run.ï¼š
```bash
python DouYinCommand.py
```
During the operation, the tool will automatically download content according to the configuration in the config.yml file.

**Method 2: CLI Arguments**
Enter the project root directory in the command line and execute the following command, where -C True means to enable cookies (which can be omitted if cookies are not needed), -l is followed by the Douyin share link, and -p is followed by the download path.ï¼š
```bash
python DouYinCommand.py -C True -l "æŠ–éŸ³åˆ†äº«é“¾æ¥" -p "ä¸‹è½½è·¯å¾„"
```
â€‹
### Troubleshooting
- Runtime error ModuleNotFoundError: indicates that some Python modules are missing. Confirm whether you have correctly executed 'pip install -r requirements.txt' to install the dependencies. If they are already installed, check if the Python environment is correct. You can try recreating and activating the virtual environment, then install the dependencies again.
- Download failed prompt: Cookie is invalid: re-obtain the latest Cookie, ensure that the Cookie has not expired, and make sure there are no missing or extra characters during the copying process.
- Download content is missing or incomplete: Check if there is enough disk space in the save path. If the network is unstable, try reducing the number of threads or downloading in batches.

## ğŸ“¦ Project Structure

```
douyin-downloader/
â”œâ”€â”€ apiproxy/               # Core modules
|   â”œâ”€â”€ common/
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ config.py
|   |   â””â”€â”€ utlis.py 
|   â”œâ”€â”€douyin/
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ database.py
|   |   â”œâ”€â”€ douyin.py 
|   |   â”œâ”€â”€ douyinapi.py   #API handler
|   |   â”œâ”€â”€ download.py    #Multithreaded downloader
|   |   â”œâ”€â”€ result.py
|   |   â””â”€â”€ urls.py 
|   â”œâ”€â”€ tiktok/
|   |   â”œâ”€â”€ __init__.py
|   |   â””â”€â”€ __init__.py 
â”œâ”€â”€ docs/
|   â”œâ”€â”€examples.md          #Usage examples
â”œâ”€â”€ img/                    
â”œâ”€â”€ utlis/ 
|   â”œâ”€â”€ logger.py           #Logging system (debug levels)
â”œâ”€â”€ DouYinCommand.py        #Main entry
â”œâ”€â”€ README.md
â”œâ”€â”€ config.example.yml      #Component
â”œâ”€â”€ config.yml              #User config
â””â”€â”€ requirements.txt        # Dependencies
```

## ä½¿ç”¨äº¤æµç¾¤

![fuye](img/fuye.png)

## ä½¿ç”¨æˆªå›¾

![DouYinCommand1](img/DouYinCommand1.png)
![DouYinCommand2](img/DouYinCommand2.png)
![DouYinCommand download](img/DouYinCommanddownload.jpg)
![DouYinCommand download detail](img/DouYinCommanddownloaddetail.jpg)

## ğŸ“ æ”¯æŒçš„é“¾æ¥ç±»å‹

- ä½œå“åˆ†äº«é“¾æ¥ï¼š`https://v.douyin.com/xxx/`
- ä¸ªäººä¸»é¡µï¼š`https://www.douyin.com/user/xxx`
- å•ä¸ªè§†é¢‘ï¼š`https://www.douyin.com/video/xxx`
- å›¾é›†ï¼š`https://www.douyin.com/note/xxx`
- åˆé›†ï¼š`https://www.douyin.com/collection/xxx`
- éŸ³ä¹åŸå£°ï¼š`https://www.douyin.com/music/xxx`
- ç›´æ’­ï¼š`https://live.douyin.com/xxx`

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### å‘½ä»¤è¡Œå‚æ•°

åŸºç¡€å‚æ•°ï¼š
```
-C, --cmd            ä½¿ç”¨å‘½ä»¤è¡Œæ¨¡å¼
-l, --link          ä¸‹è½½é“¾æ¥
-p, --path          ä¿å­˜è·¯å¾„
-t, --thread        çº¿ç¨‹æ•°ï¼ˆé»˜è®¤5ï¼‰
```

ä¸‹è½½é€‰é¡¹ï¼š
```
-m, --music         ä¸‹è½½éŸ³ä¹ï¼ˆé»˜è®¤Trueï¼‰
-c, --cover         ä¸‹è½½å°é¢ï¼ˆé»˜è®¤Trueï¼‰
-a, --avatar        ä¸‹è½½å¤´åƒï¼ˆé»˜è®¤Trueï¼‰
-j, --json          ä¿å­˜JSONæ•°æ®ï¼ˆé»˜è®¤Trueï¼‰
```

æ›´å¤šå‚æ•°è¯´æ˜è¯·ä½¿ç”¨ `-h` æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚

### ç¤ºä¾‹å‘½ä»¤

1. ä¸‹è½½å•ä¸ªè§†é¢‘ï¼š
```bash
python DouYinCommand.py -C True -l "https://v.douyin.com/xxx/"
```

2. ä¸‹è½½ä¸»é¡µä½œå“ï¼š
```bash
python DouYinCommand.py -C True -l "https://v.douyin.com/xxx/" -M post
```

3. æ‰¹é‡ä¸‹è½½ï¼š
```bash
python DouYinCommand.py -C True -l "é“¾æ¥1" -l "é“¾æ¥2" -p "./downloads"
```

æ›´å¤šç¤ºä¾‹è¯·å‚è€ƒ[ä½¿ç”¨ç¤ºä¾‹æ–‡æ¡£](docs/examples.md)ã€‚

## ğŸ“‹ æ³¨æ„äº‹é¡¹

1. æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨
2. ä½¿ç”¨å‰è¯·ç¡®ä¿å·²å®‰è£…æ‰€éœ€ä¾èµ–
3. Cookie ä¿¡æ¯éœ€è¦è‡ªè¡Œè·å–
4. å»ºè®®é€‚å½“è°ƒæ•´çº¿ç¨‹æ•°ï¼Œé¿å…è¯·æ±‚è¿‡äºé¢‘ç¹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ é¸£è°¢

- [TikTokDownload](https://github.com/Johnserf-Seed/TikTokDownload)
- æœ¬é¡¹ç›®ä½¿ç”¨äº† ChatGPT è¾…åŠ©å¼€å‘ï¼Œå¦‚æœ‰é—®é¢˜è¯·æ Issue

## ğŸ“Š Star History

[![Star History Chart](https://api.star-history.com/svg?repos=jiji262/douyin-downloader&type=Date)](https://star-history.com/#jiji262/douyin-downloader&Date)




# License

[MIT](https://opensource.org/licenses/MIT) 

<!-- é‚¹çˆ±åä¸»è¦åŠŸèƒ½ä½¿ç”¨æ•™ç¨‹ -->
ï¼ˆoneï¼‰ Configuration file format
Process: By creating and editing the config. yml configuration file, it is easy to manage download parameters.
Basic configuration: Set download link, save path, and download options (such as music, cover, avatar, etc.).
Download link: Supports work links or user homepage links.
Save Path: Specify the storage directory for the downloaded file.
Download options: You can choose whether to download music, cover, avatar, and save JSON data.
Time range filtering: Only download works within a specific time range.
Incremental Update: Supports incremental updates for publishing works, collections, etc.
Quantity limit: Limit the number of downloaded works, such as the latest 10 released works.
This is a complete configuration file and instructions of the Tiktok video download tool. Let me analyze the functions and implementation logic of each part in detail:
#Download link
link:
- " https://v.douyin.com/xxxxx/ # Work Link
- " https://www.douyin.com/user/xxxxx # User homepage
#Save Path
path: "./downloads"
#Download Options
Music: true # Download video soundtrack (MP3 format)
Cover: true # Download video cover (JPG/PNG)
Avatar: true # Download author avatar (valid in user homepage mode)
JSON: true # Save video metadata (author information, publication time, etc.)
Execute the following command:
python DouYinCommand.py
#Time range filtering
Only download works within the specified time range
Start_time: "2023-01-01" # Start time
End_time: "2023-12-31" # End time
#Or use 'now' to indicate the current time
end_time: "now"
#Incremental update
increase:
Post: true # Skip downloaded published works
Like: false # Always download liked works (without checking for duplicates)
Mix: true # Skip downloaded collection content
#Quantity restriction strategy
number:
Post: 10 # Retrieve 10 items in reverse order of publication time
Like: 5 # Download up to 5 like works
Mix: 3 # Only 3 videos per collection
ï¼ˆtwoï¼‰ Command line mode
Single video: Download a single work.
User homepage: Download works posted or liked by users, supporting simultaneous downloading of multiple types.
Collection: Download the specified collection or all collections of the user.
Custom save options: You can set not to download music, cover art, or customize the save path.
Batch Download: Supports multi link batch download and multi-threaded acceleration.
#Download a single video
python DouYinCommand.py -C True -l " https://v.douyin.com/xxxxx/ "
Download user homepage works
#Download and publish works
python DouYinCommand.py -C True -l " https://www.douyin.com/user/xxxxx " -M post
#Download and like works
python DouYinCommand.py -C True -l " https://www.douyin.com/user/xxxxx " -M like
#Simultaneously download, publish, and like works
python DouYinCommand.py -C True -l " https://www.douyin.com/user/xxxxx " -M post -M like
Download Collection
#Download a single collection
python DouYinCommand.py -C True -l " https://www.douyin.com/collection/xxxxx "
#Download all user collections
python DouYinCommand.py -C True -l " https://www.douyin.com/user/xxxxx " -M mix
Customize save options
#Do not download music and covers
Python DouYinCommander. py - C True - l "Link" - m False - c False
#Customize save path
Python DouYinCommand. py - C True - l "Link" - p "./mydownloads
Batch download
#Download multiple links
Python DouYinCommander. py - C True - l "Link 1" - l "Link 2" - l "Link 3"
#Using multithreading
Python DouYinCommander. py - C True - l "Link" - t 10
ï¼ˆthreeï¼‰. Advanced usage
Cookie settings: Resolve access restriction issues.
Database support: Enable the database to support incremental updates.
Folder style: Control whether to create separate folders for each work.
Cookie settings: (Anti crawling)
#Cookie settings
If you encounter access restrictions, you can set cookies:
#Configuration file format:
cookies:
MsToken: "xxx" # Dynamic Token
Ttwid: "xxx" # Device Fingerprint
Odin_tt: "xxx" # User ID
#Command line method:
Python DouYinCommand. py - C True - l "Link" - cookie "msToken=xxx;  ttwid=xxx; "
#Database support
#Enable database to support incremental updates:
database: true
#Folder Style
#Control file saving structure:
Folderstyle: true # Create a separate folder for each work